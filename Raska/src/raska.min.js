(function(n){"use strict";var h=document.querySelector.bind(document),t=function(){return n.requestAnimationFrame=function(){var t=null;return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||function(i){t!==null&&n.clearTimeout(t);t=n.setTimeout(i,o.frameRefreshRate)}}(),{$device:function(){var i="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,n={isTouch:i,gathersXYPositionFrom:function(i,r){n.isTouch&&t.$obj.is(r.touches.length,"number")&&r.touches.length>0&&(r=r.touches[0]);var u=i.getBoundingClientRect();return{x:(r.clientX-u.left)*(i.width/u.width),y:(r.clientY-u.top)*(i.height/u.height)}},on:function(t,i,r){return window.addEventListener?t.addEventListener(i,r,!1):window.attachEvent?t.attachEvent("on"+i,r):t["on"+i]=r,n}};return n}(),$log:{active:!1,info:function(n,t){this.active===!0&&console.info(n,t)}},$obj:function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function f(n,t){for(var r,u,e=0;e<n.length;e++){if(r=n[e],r.graphNode===!0&&((u=r.getLinksFrom())===null||u.length===0)&&((u=r.getLinksTo())===null||u.length===0))throw new i.errors.elementDoesNotHaveALink(r.name);r.isSerializable()&&(t.push(r.normalize()),f(r.getChildElements(),t))}}var r;return r={forEach:function(n,t){var u=[],i;if(r.isArray(n))for(i=0;i<n.length;i++)u.push(t(n[i],i));return u},is:function(n,t){return typeof n===t},isType:function(n,t){return this.isValid(n)&&Object.prototype.toString.call(n).toLowerCase()==="[object "+t.toLowerCase()+"]"},generateId:function(){return"__"+n()+n()+n()+n()+n()+n()+n()+n()},isValid:function(n){return!this.is(n,"undefined")&&n!==null},isArray:function(n){return this.isValid(n)&&this.isType(n,"Array")},isUndefined:function(n){return this.is(n,"undefined")},deconstruct:function(n){var i=[];return t.$obj.isArray(n)&&f(n,i),JSON.stringify(i)},recreate:function(n){if(this.isValid(n.type)&&n.type in u){var t=this.extend(new i[n.type],n);return t.getType=function(){return n.type},t}return null},recreateLinks:function(n,t,i){this.forEach(this.forEach(t.linksTo,i),n.addLinkTo.bind(n));this.forEach(this.forEach(t.childElements,i),n.addChild.bind(n));t.parent!==null&&i(t.parent).addChild(n)},extend:function(n,t,i){var u={},r=null;if(this.isUndefined(t))for(r in n)u[r]=n[r];else{i===!0&&(u=t);for(r in n)u.hasOwnProperty(r)||(u[r]=t.hasOwnProperty(r)?t[r]:n[r])}return u}}}()}}(),c=function(n,i,r){var f=i||null,e=[],u;for(this.element=n,this.hasParent=function(n){return f!==null&&(f.element===n||f.getName()===n.name||f.hasParent(n))},this.getParentGraphNodeFor=function(n){return this.element===n||this.getName()===n.name?this:f!==null?this.getParent(n):null},this.getName=function(){return n.name},this.getParent=function(){return f},this.getLinks=function(){return e},u=0;u<r.length;u++)r[u].graphNode===!0&&(this.hasParent(r[u])?t.$log.info("ingored parent node",this.getParentGraphNodeFor(r[u])):e.push(new c(r[u],this,r[u].getLinksTo())))},f={relative:0,absolute:1},u={basic:"basic",html:"htmlElement",arrow:"arrow",circle:"circle",square:"square",label:"label",triangle:"triangle"},e=function(){function l(n,t){for(var i=0;i<n.length;i++)t(n[i]);return[]}var a=function(){},h=!1,o=null,n=[],r=[],e=[],c,s=[];return c={attr:{},name:"anonymous",getType:function(){return u.basic},graphNode:!0,canLink:function(n,i){return n===this?t.$obj.isValid(i)&&i.canReach(this)===!1:!0},disable:function(){return h=!0,t.$obj.forEach(s,function(n){t.$obj.is(n,"function")?n(this):n.elementDisabledNotification(this)}.bind(this)),s.length=0,this.clearAllLinks(),t.$obj.forEach(e,function(n){n.disable()}),e.length=0,this.drawTo=a,this},notifyDisableStateOn:function(n){return s.indexOf(n)===-1&&(t.$obj.isValid(n.elementDisabledNotification)||t.$obj.is(n,"function"))&&s.push(n),this},elementDisabledNotification:function(){return this},canReach:function(t){if(n.length>0)for(var i=0;i<n.length;i++)if(n[i].canReach(t))return!0;return this===t},isLinkable:function(){return!h},isSerializable:function(){return!h},addLinkTo:function(i){return t.$obj.isValid(i.isLinkable)&&i.isLinkable()&&this.isLinkable()&&n.indexOf(i)===-1&&i!==this&&this.canLink(this,i)?(n.push(i),i.addLinkFrom(this),!0):!1},addLinkFrom:function(n){return t.$obj.isValid(n.isLinkable)&&n.isLinkable()&&this.isLinkable()&&r.indexOf(n)===-1&&n!==this&&this.canLink(n,this)?(r.push(n),n.addLinkTo(this),!0):!1},removeLinkTo:function(t){return n.indexOf(t)>-1&&(n.splice(n.indexOf(t),1),t.removeLinkFrom(this)),this},normalize:function(){var n=function(n){return n.name},i=t.$obj.extend(this,{linksTo:t.$obj.forEach(this.getLinksTo(),n),childElements:t.$obj.forEach(this.getChildElements(),n),parent:t.$obj.isValid(o)?o.name:null,type:this.getType()},!0);return delete i.on,i},getLinksTo:function(){return n},getLinksFrom:function(){return r},removeLinkFrom:function(n){return r.indexOf(n)>-1&&(r.splice(r.indexOf(n),1),n.removeLinkTo(this)),this},clearAllLinks:function(){return n=l(n,function(n){n.removeLinkFrom(this)}.bind(this)),r=l(r,function(n){n.removeLinkTo(this)}.bind(this)),this},getChildElements:function(){return e},addChild:function(n){return n.setParent(this),e.push(n),this},getParent:function(){return o},getBoundaries:function(){return{x:this.getWidth(),y:this.getHeight(),minX:0,minY:0}},setParent:function(n){return o=n,this},border:{color:null,active:!1,width:0},position:f.relative,x:50,y:50,getAdjustedCoordinates:function(){if(this.position===f.relative&&o!==null){var n=o.getAdjustedCoordinates();return{x:this.x+n.x,y:this.y+n.y}}return{x:this.x,y:this.y}},canHandleEvents:function(){return!0},on:function(){function r(n,i,r,u,f){t.$obj.forEach(f,function(t){t(n,i,r,u)})}var n=[],i=[];return{click:function(i,u,f,o){var s,h;return t.$obj.isType(i,"number")===!0?(s=!1,e.length>0&&(h=f.getAdjustedCoordinates(),t.$obj.forEach(e,function(n){var t={x:i-h.x,y:u-h.y};n.canHandleEvents()&&n.existsIn(t.x,t.y)&&(n.on.click(t.x,t.y,n,o),s=!0)})),s===!1&&r(i,u,f,o,n)):t.$obj.isType(i,"function")===!0&&n.push(i),c},release:function(n,u,f,o){var s,h;return t.$obj.isType(n,"number")===!0?(s=!1,e.length>0&&(h=f.getAdjustedCoordinates(),t.$obj.forEach(e,function(t){var i={x:n-h.x,y:u-h.y};t.canHandleEvents()&&t.existsIn(i.x,i.y)&&(t.on.release(i.x,i.y,t,o),s=!0)})),s===!1&&r(n,u,f,o,i)):t.$obj.isType(n,"function")===!0&&i.push(n),c}}}(),adjustPosition:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},setWidth:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},getWidth:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},getAdjustedWidth:function(){return this.getWidth()},setHeight:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},getHeight:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},getAdjustedHeight:function(){return this.getHeight()},existsIn:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;},drawTo:function(){console.error(i.errors.notImplementedException);throw i.errors.notImplementedException;}}},i={library:{readonly:!1,frameRefreshRate:30,targetCanvasId:""},errors:{notImplementedException:{message:"Not implemented",code:0},nullParameterException:function(n){if(typeof n=="undefined"||n===null)throw new this.nullParameterException("parameterName");this.message="Parameter can't be null";this.parameterName=n;this.code=1},elementDoesNotHaveALink:function(n){if(typeof n=="undefined"||n===null)throw new this.nullParameterException("elementName");return{message:"Element '"+n+"' doesn't have a valid linked sibling",elementName:n,code:2}},itemNotFoundException:function(n){if(typeof n=="undefined"||n===null)throw new this.nullParameterException("elementName");return{message:"Element '"+n+"' wasn't found",elementName:n,code:3}}},label:function(){return t.$obj.extend(new e,{name:"label"+t.$obj.generateId(),graphNode:!1,getType:function(){return u.label},canLink:function(){return!1},isLinkable:function(){return!1},text:"",color:"gray",x:0,y:0,border:{color:"white",active:!0,width:2},font:{family:"Arial",size:"15px",decoration:""},getWidth:function(){return this.text.length*5},getHeight:function(){return this.font.size},drawTo:function(n,t){var i=this.getAdjustedCoordinates();t.font=this.font.decoration+" "+this.font.size+" "+this.font.family;this.border.active===!0&&(t.lineJoin="round",t.lineWidth=this.border.width,t.strokeStyle=this.border.color,t.strokeText(this.text,i.x,i.y));t.fillStyle=this.color;t.fillText(this.text,i.x,i.y)},existsIn:function(){return!1}},!0)},square:function(n){var i=n||{width:50,height:50};return t.$obj.extend(new e,{name:"square"+t.$obj.generateId(),getType:function(){return u.square},border:{color:"gray",active:!0,width:2},fillColor:"silver",dimensions:i,globalAlpha:1,getWidth:function(){return this.dimensions.width},getHeight:function(){return this.dimensions.height},drawTo:function(n,t){var i=this.getAdjustedCoordinates();t.beginPath();t.rect(i.x,i.y,this.dimensions.width,this.dimensions.height);t.fillStyle=this.fillColor;this.border.active===!0&&(t.lineWidth=this.border.width,t.strokeStyle=this.border.color);t.globalAlpha=this.globalAlpha;t.fill();t.stroke()},existsIn:function(n,t){return n>=this.x&&n<=this.x+this.dimensions.width&&t>=this.y&&t<=this.y+this.dimensions.height},adjustPosition:function(n,t){var i=this.getParent();if(this.position===f.relative&&i!==null){var s=i.getAdjustedCoordinates(),r=i.getWidth()/2,u=i.getHeight()/2,e=n-s.x-r,o=t-s.y-u;this.x=e<0?Math.max(e,r*-1):Math.min(e,r);this.y=o<0?Math.max(o,u*-1):Math.min(o,u)}else this.x=n,this.y=t;return this}},!0)},arrow:function(n){if(t.$obj.isUndefined(n)||n===null)throw new i.errors.nullParameterException("target");var r=n,f=function(n,t,i,r,u,f,e){n.fillStyle=e;n.save();n.beginPath();n.translate(t,i);n.rotate(r);n.moveTo(0,-10);n.lineTo(f,u);n.lineTo(f*-1,u);n.closePath();n.restore();n.fill()};return t.$obj.extend(new e,{name:"arrow"+t.$obj.generateId(),clearAllLinks:function(){return t.$obj.isValid(this.getParent())&&t.$obj.is(this.getParent().removeLinkFrom,"function")&&t.$obj.is(r.removeLinkTo,"function")&&(this.getParent().removeLinkFrom(r).removeLinkTo(r),r.removeLinkFrom(this.getParent()).removeLinkTo(this.getParent())),this},elementDisabledNotification:function(n){(n===r||n===this.getParent())&&this.disable()},graphNode:!1,canHandleEvents:function(){return!1},isSerializable:function(){return!1},getType:function(){return u.arrow},canLink:function(){return!1},isLinkable:function(){return!1},border:{color:"silver",active:!0,width:2},fillColor:"black",getWidth:function(){return 1},getHeight:function(){return 1},drawTo:function(n,i){var o,s;t.$obj.isValid(r.notifyDisableStateOn)&&r.notifyDisableStateOn(this);t.$obj.isValid(this.getParent().notifyDisableStateOn)&&this.getParent().notifyDisableStateOn(this);var c=r.getAdjustedCoordinates?r.getAdjustedCoordinates():{x:r.x,y:r.y},u=this.getParent(),l=u.getAdjustedCoordinates(),e=l.x+(u.getAdjustedWidth?u.getAdjustedWidth()/2:0),h=l.y+(u.getAdjustedHeight?u.getAdjustedHeight()/2:0);this.x=c.x+(r.getAdjustedWidth?r.getAdjustedWidth()/2:0);this.y=c.y+(r.getAdjustedHeight?r.getAdjustedHeight()/2:0);i.beginPath();i.fillStyle=this.fillColor;this.border.active===!0&&(o=i.createLinearGradient(this.x,this.y,e,h),o.addColorStop(0,this.fillColor),o.addColorStop(1,this.border.color),i.lineWidth=this.border.width,i.strokeStyle=o);i.moveTo(this.x,this.y);i.lineTo(e,h);i.stroke();s=Math.atan((h-this.y)/(e-this.x));s+=(e>this.x?-90:90)*Math.PI/180;f(i,this.x,this.y,s,23,10,this.fillColor);f(i,this.x,this.y,s,18,6,"white")},existsIn:function(n,t){var i=this.x,r=this.y,u=this.getParent(),f=u.x,e=u.y,o=f-i,s=e-r,h=2,c=Math.floor(Math.abs(s*n-o*t-i*e+f*r)/Math.sqrt(Math.pow(o,2)+Math.pow(s,2)));return this.border.active===!0&&(h=this.border.width),c<=h}},!0)},htmlElement:function(n){var r,f;if(!t.$obj.isValid(n)){r=new i.errors.nullParameterException("element");console.error(r.message);throw r;}return f=n,t.$obj.extend(new e,{name:"htmlElement"+t.$obj.generateId(),canHandleEvents:function(){return!1},getType:function(){return u.html},graphNode:!1,isSerializable:function(){return!1},canLink:function(){return!1},isLinkable:function(){return!1},border:{active:!1},fillColor:"",getWidth:function(){return n.clientWidth},getHeight:function(){return n.clientHeight},drawTo:function(){},existsIn:function(){return!1},handleInteractions:!0,onIteraction:function(n,i){var r=function(t){i(t,f,n)};t.$device.on(f,n,r)}},!0)},triangle:function(n){var i={p2:{x:0,y:0},p3:{x:0,y:0}};return t.$obj.extend(new e,{name:"triangle"+t.$obj.generateId(),border:{color:"gray",active:!0,width:2},getType:function(){return u.triangle},fillColor:"silver",pointingUp:n!==!1,dimensions:{width:50,height:50},setWidth:function(n){return this.dimensions.width=n,this},getWidth:function(){return this.dimensions.width},setHeight:function(n){return this.dimensions.height=n,this},getAdjustedHeight:function(){return this.pointingUp===!0?this.dimensions.height*-1:this.dimensions.height/2},getHeight:function(){return this.dimensions.height},drawTo:function(n,t){var u=this.pointingUp===!1?function(n,t){return n+t}:function(n,t){return n-t},r=this.getAdjustedCoordinates();t.beginPath();t.fillStyle=this.fillColor;t.moveTo(r.x,r.y);t.lineTo(i.p2.x=r.x+this.dimensions.width/2,i.p2.y=u(r.y,this.dimensions.height));t.lineTo(i.p3.x=r.x+this.dimensions.width,i.p3.y=r.y);t.closePath();this.border.active===!0&&(t.lineWidth=this.border.width,t.strokeStyle=this.border.color);t.fill();t.stroke()},existsIn:function(n,t){var h=this.getAdjustedCoordinates(),u=h,f=i.p2,r=i.p3,e={x:n,y:t},o=((f.y-r.y)*(e.x-r.x)+(r.x-f.x)*(e.y-r.y))/((f.y-r.y)*(u.x-r.x)+(r.x-f.x)*(u.y-r.y)),s=((r.y-u.y)*(e.x-r.x)+(u.x-r.x)*(e.y-r.y))/((f.y-r.y)*(u.x-r.x)+(r.x-f.x)*(u.y-r.y)),c=1-o-s;return o>0&&s>0&&c>0},adjustPosition:function(n,t){var i=this.getParent();if(this.position===f.relative&&i!==null){var s=i.getAdjustedCoordinates(),r=i.getWidth()/2,u=i.getHeight()/2,e=n-s.x-r,o=t-s.y-u;this.x=e<0?Math.max(e,r*-1):Math.min(e,r);this.y=o<0?Math.max(o,u*-1):Math.min(o,u)}else this.x=n,this.y=t;return this}},!0)},circle:function(){return t.$obj.extend(new e,{name:"circle"+t.$obj.generateId(),border:{color:"gray",active:!0,width:2},getType:function(){return u.circle},fillColor:"silver",radius:20,setWidth:function(n){return this.radius=n/2,this},getWidth:function(){return this.radius*2},getAdjustedWidth:function(){return this.radius/2},setHeight:function(n){return this.radius=n/2,this},getAdjustedHeight:function(){return this.radius/2},getHeight:function(){return this.radius*2},drawTo:function(n,t){var i=this.getAdjustedCoordinates();t.beginPath();t.arc(i.x,i.y,this.radius,0,2*Math.PI,!1);t.fillStyle=this.fillColor;t.fill();this.border.active===!0&&(t.lineWidth=this.border.width,t.strokeStyle=this.border.color);t.stroke()},existsIn:function(n,t){var i=this.x-n,r=this.y-t;return i*i+r*r<this.radius*this.radius},getBoundaries:function(){var n=this.radius/2;return{x:n,y:n,minX:n*-1,minY:n*-1}},adjustPosition:function(n,t){var r=this.getParent();if(this.position===f.relative&&r!==null){var o=r.getAdjustedCoordinates(),i=r.getBoundaries(),s=i.x,h=i.y,u=n-o.x-s,e=t-o.y-h;this.x=u<0?Math.max(u,i.minX):Math.min(u,s);this.y=e<0?Math.max(e,i.minY):Math.min(e,h)}else this.x=n,this.y=t;return this}},!0)}},o=null,l=function(){var n={click:0,mousemove:1},i=function(n){return function(t,i,u){n({x:r.mouseHelper.getX(t),y:r.mouseHelper.getY(t),details:{interactionType:u,targetElement:i}})}};return{getInteractionTypes:n,register:function(r,u,f){if(u in n&&t.$obj.isValid(r)&&r.handleInteractions===!0)r.onIteraction(u,i(f))}}}(),r=function(){var u=[],l=!1,f=null,v=null,s=null,y=function(){l===!0&&(tt(),n.requestAnimationFrame(y))},p=function(n){var i,t;for(n.drawTo(f,s),i=n.getChildElements(),t=0;t<i.length;t++)p(i[t])},e={getX:function(n){return t.$device.gathersXYPositionFrom(f,n).x},getY:function(n){return t.$device.gathersXYPositionFrom(f,n).y},staticCoordinates:function(){var n={clientX:0,clientY:0},t=!1;return{getXY:function(){return t||(f.onmousemove=function(t){n.clientX=t.clientX;n.clientY=t.clientY+30},t=!0),{x:e.getX(n),y:e.getY(n)}}}}()},r={reference:null,holdingCTRL:!1,originalBorder:{},dragTypes:{moving:1,linking:3},dragType:0,temporaryLinkArrow:function(){return{tryRender:function(){if(r.reference!==null&&r.dragType===r.dragTypes.linking){var t=e.staticCoordinates.getXY(),n=new i.arrow({x:t.x,y:t.y-30,getHeight:function(){return 0}});n.name="_temp";n.setParent(r.reference);n.drawTo(f,s)}return this}}}(),border:{whenMoving:{color:"yellow",active:!0},whenLiking:{color:"green",active:!0}}},w=function(n){r.reference!==null&&r.dragType===r.dragTypes.moving&&(t.$log.info("Moving element",r),r.reference.x=e.getX(n),r.reference.y=e.getY(n))},a=function(n){if(r.reference!==null){if(r.dragType===r.dragTypes.linking)for(var t=0;t<u.length;t++)if(u[t]!==r.reference&&u[t].existsIn(e.getX(n),e.getY(n))&&r.reference.addLinkTo(u[t])){u.push(new i.arrow(u[t]).setParent(r.reference));break}r.reference.on.release(e.getX(n),e.getY(n),r.reference,n);r.reference.border=r.originalBorder;r.reference=null}},k=function(n){return t.$log.info("Removing element",n),n.disable(),u.splice(u.indexOf(n),1),this},d=function(n){return t.$log.info("Adding element",n),u.push(n),this},g=function(){return r.holdingCTRL=!1,this},nt=function(n){var t=n.keyCode||n.charCode;return(t===46||t===8)&&r.reference!==null?(k(r.reference.clearAllLinks()),r.reference=null):r.holdingCTRL=t===17,this},b=function(i){var f,o;for(i=i||n.event,f=0;f<u.length;f++)u[f].existsIn(e.getX(i),e.getY(i))&&(r.reference=u[f]).canHandleEvents()&&r.reference.on.click(e.getX(i),e.getY(i),r.reference,i);return r.reference!==null&&(o=r.dragTypes.moving,t.$device.isTouch||(o=r.holdingCTRL===!0&&r.reference.isLinkable()===!0?r.dragTypes.linking:i.which),r.originalBorder=r.reference.border,r.reference.border=(r.dragType=o)===r.dragTypes.moving?r.border.whenMoving:r.border.whenLiking,t.$log.info("Dragging element",{r:r.reference,d:o})),i.preventDefault?i.preventDefault():i.returnValue&&(i.returnValue=!1),!1},tt=function(){if(f===null){s=(f=h("#"+o.targetCanvasId)).getContext("2d");t.$device.on(f,"mousedown",b).on(f,"mousemove",w).on(f,"contextmenu",function(n){return n.preventDefault(),!1}).on(n,"mouseup",a).on(n,"keydown",nt).on(n,"keyup",g);if(t.$device.isTouch===!0)t.$device.on(f,"touchstart",b).on(f,"touchmove",w).on(n,"touchend",a).on(n,"touchcancel",a);v=t.$obj.extend(new i.htmlElement(f),{})}s.clearRect(0,0,f.width,f.height);for(var e=0;e<u.length;e++)p(u[e]);return r.temporaryLinkArrow.tryRender(),this},it=function(){for(var f={},n,t,r=0;r<u.length;r++)if(n=u[r],n.graphNode===!0){if(((t=n.getLinksFrom())===null||t.length===0)&&((t=n.getLinksTo())===null||t.length===0))throw new i.errors.elementDoesNotHaveALink(n.name);f[n.name]=new c(n,null,n.getLinksTo())}return f};return{mouseHelper:e,addElement:function(n){return d(n),this},getDataUrl:function(){return f.toDataURL()},getElementsSlim:function(){return it()},getElements:function(){return u},reloadUsing:function(n){u=n;this.initializeTimedDrawing()},getCanvasElement:function(){return v},initializeTimedDrawing:function(){l===!1&&(l=!0,y())}}}(),s={newLabel:function(n){return t.$obj.extend(new i.label,n)},newSquare:function(){return t.$obj.extend(new i.square,{})},newTriangle:function(n){return t.$obj.extend(new i.triangle(n),{})},newCircle:function(){return t.$obj.extend(new i.circle,{})},plot:function(n){return r.addElement(n),s},exportImage:function(){var n=window.open();return n.document.write("<img src='"+r.getDataUrl()+"'>"),s},getElementsRaw:function(){return r.getElements()},getElementsSlim:function(){return r.getElementsSlim()},getElementsString:function(){return t.$obj.deconstruct(r.getElements())},loadElementsFrom:function(n){var e=JSON.parse(n),a,s,h,c;if(t.$obj.isArray(e)){for(var f=[],l=[],u=0,o=null,u=0;u<e.length;u++){if((o=t.$obj.recreate(e[u]))===null)return alert("Invalid JSON. See the console for more info"),console.error("Could not deserialize this element",e[u]),this;e[u].parent===null?(o.originalIndex=u,f.push(o)):l.push(o)}for(a=function(n){function r(t){for(var i=0;i<t.length;i++)if(t[i].name===n)return t[i]}if(!t.$obj.isValid(n))return null;var u=r(f)||r(l);if(!u)throw i.errors.itemNotFoundException(n);return u},u=0;u<f.length;u++)t.$obj.recreateLinks(f[u],e[f[u].originalIndex],a),delete f[u].originalIndex;for(s=[],u=0;u<f.length;u++)if(h=f[u],h.isLinkable()===!0&&(s=h.getLinksTo()).length>0)for(c=0;c<s.length;c++)f.push(new i.arrow(s[c]).setParent(h));r.reloadUsing(f)}return this},positionTypes:function(){return f}(),installUsing:function(n){return o=t.$obj.extend(i.library,n),r.initializeTimedDrawing(),s},onCanvasInteraction:function(n,t){return l.register(r.getCanvasElement(),n,t),this},getCanvasBoundaries:function(){var n=r.getCanvasElement();return{maxH:n.getHeight(),maxW:n.getWidth()}},clear:function(){return r.reloadUsing([]),this},$$:{$h:t,$q:h,$c:o}};n.raska=s})(window);
//# sourceMappingURL=raska.min.js.map
