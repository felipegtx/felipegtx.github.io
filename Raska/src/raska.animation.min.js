(function(n){"use strict";if(typeof n.raska=="undefined")throw new{message:"Raska was not found!"};var l=raska.$$.$q,t=raska.$$.$h,c=raska.$$.$c,o={invalidElement:function(){this.message="Invalid element";this.code="AN0"}},f=function(){return n.requestAnimationFrame=function(){var t=null;return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||function(i){t!==null&&n.clearTimeout(t);t=n.setTimeout(i,c.frameRefreshRate)}}(),{execute:function(t){n.requestAnimationFrame(t)}}}();n.raska.baseAnimation={execute:function(){return t.$log.info("nope",element),this},resetElement:function(){return this},stop:function(){return this}};var i=function(){var i,n=[],u=[],e=!1,r=null;return i={register:function(t){return n.indexOf(t)===-1&&(n.push(t),e===!0&&u.push(t)),i},stop:function(){return t.$obj.forEach(n,function(n){n.stop()}),n.length=0,t.$obj.forEach(u,function(n){n.stop()}),u.length=0,r!==null&&(window.clearTimeout(r),r=null),i},saveStates:function(){return e=!0,i},restoreFromSavedState:function(){if(n.length===0&&u.length>0)for(var t=0;t<(n=u.slice()).length;t++)n[t].resetElement();return i},execute:function(u,e){return n.length>0?n.shift().execute(function(){t.$obj.isType(e,"number")===!0?(r!==null&&window.clearTimeout(r),r=window.setTimeout(function(){i.execute(u,e)},e)):f.execute(function(){i.execute(u)})}):t.$obj.isType(u,"function")&&u(),i}}}(),u=null,e=!1,s=null,h=function(){u!==null&&(window.clearTimeout(u),u=null);e===!0&&(i.restoreFromSavedState(),i.execute(function(){e===!0&&(t.$obj.isType(s,"number")===!0?(u!==null&&window.clearTimeout(u),u=n.setTimeout(h,s)):f.execute(h))}))},r={fadeIn:function(u,e){if(!t.$obj.isValid(u))throw new o.invalidElement;var h=!0,c=e||1,l=function(n,i){var e=u.getHeight(),o=u.getWidth(),s=0,c=0,r=!1,l=function(){f.execute(function(){h!==!0&&(r=!1,(s=u.getHeight())<e&&(u.setHeight(Math.min(n(s),e)),r=!0),(c=u.getWidth())<o&&(u.setWidth(Math.min(n(c),o)),r=!0),r===!0?f.execute(l):t.$obj.isType(i,"function")===!0&&i())})};u.setWidth(0).setHeight(0);l()},s=t.$obj.extend(n.raska.baseAnimation,function(){var n=u.getWidth(),t=u.getHeight();return{step:c,resetElement:function(){return u.setWidth(n).setHeight(t),this},execute:function(n){return h=!1,l(function(n){return n+s.step},n),s},stop:function(){return h=!0,s}}}(),!0);return i.register(s),r},fadeOut:function(u,e){if(!t.$obj.isValid(u))throw new o.invalidElement;var h=!0,c=e||1,l=function(n,i){var e=0,o=0,s=u.getHeight(),c=u.getWidth(),r=!1,l=function(){f.execute(function(){h!==!0&&(r=!1,(s=u.getHeight())>e&&(u.setHeight(Math.max(n(s),e)),r=!0),(c=u.getWidth())>o&&(u.setWidth(Math.max(n(c),o)),r=!0),r===!0?f.execute(l):t.$obj.isType(i,"function")===!0&&i())})};l()},s=t.$obj.extend(n.raska.baseAnimation,function(){var n=u.getWidth(),t=u.getHeight();return{step:c,resetElement:function(){return u.setWidth(n).setHeight(t),s},execute:function(n){return h=!1,l(function(n){return n-s.step},n),s},stop:function(){return h=!0,s}}}(),!0);return i.register(s),r},move:function(u,f){if(!t.$obj.isValid(u)||!t.$obj.isType(f,"function"))throw new o.invalidElement;var s=!0,h=u.getParent(),c=h===null?raska.getCanvasBoundaries():{maxW:h.getWidth(),maxH:h.getHeight()},l=function(n){if(s!==!0){var i=f(u.x,u.y);i.x>=c.maxW&&(i.x=0);i.y>=c.maxH&&(i.y=0);u.x=i.x;u.y=i.y;t.$obj.isType(n,"function")===!0&&n()}},e=t.$obj.extend(n.raska.baseAnimation,function(){return{resetElement:function(){return e},execute:function(n){return s=!1,l(n),e},stop:function(){return s=!0,e}}}(),!0);return i.register(e),r},then:function(u){return t.$obj.isType(u,"object")&&t.$obj.isType(u.execute,"function")&&i.register(t.$obj.extend(n.raska.baseAnimation,function(){var n={resetElement:function(){return n},execute:function(t){return u.execute()&&t(),n}};return n}(),!0)),r},execute:function(n){return i.execute(null,n),r},loop:function(n){return s=n,e=!0,h(),r},saveInitialStates:function(){return i.saveStates(),r},stop:function(){return e=!1,u!==null&&n.clearTimeout(u),i.stop(),r}};n.raska.animation=r})(window);
//# sourceMappingURL=raska.animation.min.js.map
