(function(n){"use strict";if(typeof n.raska=="undefined")throw{message:"Raska was not found!"};var s=raska.$$.$q,t=raska.$$.$h,u=raska.$$.$c,r={invalidElement:function(){this.message="Invalid element";this.code="AN0"}},i=function(){return n.requestAnimationFrame=function(){var t=null;return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||function(i){t!==null&&n.clearTimeout(t);t=n.setTimeout(i,u.frameRefreshRate)}}(),{execute:function(t){n.requestAnimationFrame(t)}}}();n.raska.baseAnimation={execute:function(){return t.$log.info("nope",element),this},resetElement:function(){return this},stop:function(){return this}};var f=function(){var r=[],e=[],l=!1,o=null,f=null,s=!1,h=null,u={register:function(n){return r.indexOf(n)===-1&&(r.push(n),l===!0&&e.push(n)),u},stop:function(){return s=!1,f!==null&&n.clearTimeout(f),t.$obj.forEach(r,function(n){n.stop()}),r.length=0,t.$obj.forEach(e,function(n){n.stop()}),e.length=0,o!==null&&(window.clearTimeout(o),o=null),u},saveStates:function(){return l=!0,u},restoreFromSavedState:function(){if(r.length===0&&e.length>0)for(var n=0;n<(r=e.slice()).length;n++)r[n].resetElement();return u},execute:function(n,f){return r.length>0?r.shift().execute(function(){t.$obj.isType(f,"number")===!0?(o!==null&&window.clearTimeout(o),o=window.setTimeout(function(){u.execute(n,f)},f)):i.execute(function(){u.execute(n)})}):t.$obj.isType(n,"function")&&n(),u},loop:function(n){s===!1&&(s=!0,e=r.slice());h=n;c()}},c=function(){f!==null&&(window.clearTimeout(f),f=null);s===!0&&(u.restoreFromSavedState(),u.execute(function(){s===!0&&(t.$obj.isType(h,"number")===!0?(f!==null&&window.clearTimeout(f),f=n.setTimeout(c,h)):i.execute(c))}))};return u},e=function(u,f){var o=1,e={fadeIn:function(s){if(!t.$obj.isValid(u))throw new r.invalidElement;var c=!0,l=s||o,a=function(n,r){var e=u.getHeight(),o=u.getWidth(),s=0,h=0,f=!1,l=function(){c!==!0&&(f=!1,(s=u.getHeight())<e&&(u.setHeight(Math.min(n(s),e)),f=!0),(h=u.getWidth())<o&&(u.setWidth(Math.min(n(h),o)),f=!0),f===!0?i.execute(l):t.$obj.isType(r,"function")===!0&&r())};u.setWidth(0).setHeight(0);i.execute(l)},h=t.$obj.extend(n.raska.baseAnimation,function(){var n=u.getWidth(),t=u.getHeight();return{step:l,resetElement:function(){return u.setWidth(n).setHeight(t),this},execute:function(n){return c=!1,a(function(n){return n+h.step},n),h},stop:function(){return c=!0,h}}}(),!0);return f.register(h),e},fadeOut:function(s){if(!t.$obj.isValid(u))throw new r.invalidElement;var c=!0,l=s||o,a=function(n,r){var e=0,o=0,s=u.getHeight(),h=u.getWidth(),f=!1,l=function(){c!==!0&&(f=!1,(s=u.getHeight())>e&&(u.setHeight(Math.max(n(s),e)),f=!0),(h=u.getWidth())>o&&(u.setWidth(Math.max(n(h),o)),f=!0),f===!0?i.execute(l):t.$obj.isType(r,"function")===!0&&r())};i.execute(l)},h=t.$obj.extend(n.raska.baseAnimation,function(){var n=u.getWidth(),t=u.getHeight();return{step:l,resetElement:function(){return u.setWidth(n).setHeight(t),h},execute:function(n){return c=!1,a(function(n){return n-h.step},n),h},stop:function(){return c=!0,h}}}(),!0);return f.register(h),e},move:function(o){if(!t.$obj.isValid(u)||!t.$obj.isType(o,"function"))throw new r.invalidElement;var h=!0,c=u.getParent(),l=c===null?raska.getCanvasBoundaries():{maxW:c.getWidth(),maxH:c.getHeight()},a=function(n){if(h!==!0){var r=o(u.x,u.y);r.x>=l.maxW&&(r.x=0);r.y>=l.maxH&&(r.y=0);u.x=r.x;u.y=r.y;t.$obj.isType(n,"function")===!0&&i.execute(n)}},s=t.$obj.extend(n.raska.baseAnimation,function(){return{resetElement:function(){return s},execute:function(n){return h=!1,a(n),s},stop:function(){return h=!0,s}}}(),!0);return f.register(s),e},then:function(i){return t.$obj.isType(i,"object")&&t.$obj.isType(i.execute,"function")&&f.register(t.$obj.extend(n.raska.baseAnimation,function(){var n={resetElement:function(){return n},execute:function(t){return i.execute()&&t(),n}};return n}(),!0)),e},execute:function(n){return f.execute(null,n),e},loop:function(n){return f.loop(n),e},saveInitialStates:function(){return f.saveStates(),e},stop:function(){return f.stop(),e}};return e},o=function(){var n=[],i={on:function(t){var i=new e(t,new f);return n.push(i),i},stopAll:function(){return t.$obj.forEach(n,function(n){n.stop()}),i}};return i}();n.raska.animation=o})(window);
//# sourceMappingURL=raska.animation.min.js.map
