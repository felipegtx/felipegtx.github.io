(function(e){"use strict";if("undefined"==typeof e.raska)throw{message:"Raska was not found!"};var t=(raska.$$.$q,raska.$$.$h),n=raska.$$.$c,i={invalidElement:function(){this.message="Invalid element",this.code="AN0"}},u=function(){return e.requestAnimationFrame=function(){var t=null;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(i){null!==t&&e.clearTimeout(t),t=e.setTimeout(i,n.frameRefreshRate)}}(),{execute:function(t){e.requestAnimationFrame(t)}}}();e.raska.baseAnimation={execute:function(e){return t.$log.info("nope",element),this},resetElement:function(){return this},stop:function(){return this}};var r=function(){var n,i=[],r=[],o=!1,a=null,s=null,c=!1,f=null,n={register:function(e){return i.indexOf(e)===-1&&(i.push(e),o===!0&&r.push(e)),n},stop:function(){return c=!1,null!==s&&e.clearTimeout(s),t.$obj.forEach(i,function(e,t){e.stop()}),i.length=0,t.$obj.forEach(r,function(e,t){e.stop()}),r.length=0,null!==a&&(window.clearTimeout(a),a=null),n},saveStates:function(){return o=!0,n},restoreFromSavedState:function(){if(0===i.length&&r.length>0)for(var e=0;e<(i=r.slice()).length;e++)i[e].resetElement();return n},execute:function(e,r){return i.length>0?i.shift().execute(function(){t.$obj.isType(r,"number")===!0?(null!==a&&window.clearTimeout(a),a=window.setTimeout(function(){n.execute(e,r)},r)):u.execute(function(){n.execute(e)})}):t.$obj.isType(e,"function")&&e(),n},loop:function(e){c===!1&&(c=!0,r=i.slice()),f=e,l()}},l=function(){null!==s&&(window.clearTimeout(s),s=null),c===!0&&(n.restoreFromSavedState(),n.execute(function(){c===!0&&(t.$obj.isType(f,"number")===!0?(null!==s&&window.clearTimeout(s),s=e.setTimeout(l,f)):u.execute(l))}))};return n},o=function(n,r){var o=1,a={fadeInWithBoudaries:function(e){if(!t.$obj.isValid(e))throw new i.invalidElement;return a.fadeIn(o,e)},fadeIn:function(s,c){if(!t.$obj.isValid(n))throw new i.invalidElement;var f=!0,l=c||{},m=s||o,h=function(e,i){var r=l.maxHeight||n.getHeight(),o=l.maxWidth||n.getWidth(),a=0,s=0,c=!1,m=function(){f!==!0&&(c=!1,(a=n.getHeight())<r&&(n.setHeight(Math.min(e(a),r)),c=!0),(s=n.getWidth())<o&&(n.setWidth(Math.min(e(s),o)),c=!0),c===!0?u.execute(m):t.$obj.isType(i,"function")===!0&&i())};n.setWidth(0).setHeight(0),u.execute(m)},d=t.$obj.extend(e.raska.baseAnimation,function(){var e=n.getWidth(),t=n.getHeight();return{step:m,resetElement:function(){return n.setWidth(e).setHeight(t),this},execute:function(e){return f=!1,h(function(e){return e+d.step},e),d},stop:function(){return f=!0,d}}}(),!0);return r.register(d),a},fadeOut:function(s){if(!t.$obj.isValid(n))throw new i.invalidElement;var c=!0,f=s||o,l=function(e,i){var r=0,o=0,a=n.getHeight(),s=n.getWidth(),f=!1,l=function(){c!==!0&&(f=!1,(a=n.getHeight())>r&&(n.setHeight(Math.max(e(a),r)),f=!0),(s=n.getWidth())>o&&(n.setWidth(Math.max(e(s),o)),f=!0),f===!0?u.execute(l):t.$obj.isType(i,"function")===!0&&i())};u.execute(l)},m=t.$obj.extend(e.raska.baseAnimation,function(){var e=n.getWidth(),t=n.getHeight();return{step:f,resetElement:function(){return n.setWidth(e).setHeight(t),m},execute:function(e){return c=!1,l(function(e){return e-m.step},e),m},stop:function(){return c=!0,m}}}(),!0);return r.register(m),a},move:function(o){if(!t.$obj.isValid(n)||!t.$obj.isType(o,"function"))throw new i.invalidElement;var s=!0,c=n.getParent(),f=null===c?raska.getCanvasBoundaries():{maxW:c.getWidth(),maxH:c.getHeight()},l=function(e){if(s!==!0){var i=o(n.x,n.y);i.x>=f.maxW&&(i.x=0),i.y>=f.maxH&&(i.y=0),n.x=i.x,n.y=i.y,t.$obj.isType(e,"function")===!0&&u.execute(e)}},m=t.$obj.extend(e.raska.baseAnimation,function(){return{resetElement:function(){return m},execute:function(e){return s=!1,l(e),m},stop:function(){return s=!0,m}}}(),!0);return r.register(m),a},then:function(n){return t.$obj.isType(n,"object")&&t.$obj.isType(n.execute,"function")&&r.register(t.$obj.extend(e.raska.baseAnimation,function(){var e={resetElement:function(){return e},execute:function(t){return n.execute()&&t(),e}};return e}(),!0)),a},execute:function(e){return r.execute(null,e),a},loop:function(e){return r.loop(e),a},saveInitialStates:function(){return r.saveStates(),a},stop:function(){return r.stop(),a}};return a},a=function(){var e=[],n={on:function(t){var n=new o(t,new r);return e.push(n),n},stopAll:function(){return t.$obj.forEach(e,function(e){e.stop()}),n}};return n}();e.raska.animation=a})(window);